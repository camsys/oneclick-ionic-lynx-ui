<!--ServiceFor211DetailPage-->
<ion-header>

  <!-- If there's a service present, put its name and address in the header -->
  <ion-navbar class="lynx-toolbar" *ngIf="service; else noServiceHeader">
    <ion-title>{{service.agency_name}}</ion-title>
    <div class="lynx-toolbar-body">{{service.address}}</div>
    <div *ngIf="service" class="lynx-toolbar-body">
      <a *ngIf="service.url" href="{{service.url}}" target="_blank">{{service.display_url}}</a>
    </div>
  </ion-navbar>
  
  <!-- If no service is present, put the origin and destination in the header -->
  <ng-template #noServiceHeader>
    <ion-navbar class="lynx-toolbar">
      <div class="lynx-toolbar-body">{{ origin.formatted_address}}</div>
      <div class="lynx-toolbar-body">to {{destination.formatted_address}}</div>
    </ion-navbar>
  </ng-template>

</ion-header>


<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col col-md-8 offset-md-2 no-padding>
        <ion-list class="lynx-list">
          
          <!-- For each mode other than paratransit, build a button -->
          <ion-item *ngFor="let mode of basicModes">
            <h3 item-start class="item-heading mode-label">
              {{ labelFor(mode) }}
            </h3>
            <div item-end class="mode-fare"
                 *ngIf="ready()">
              {{ tripResponse.costsByTripType(mode) | prettyFare }}
            </div>
            <button ion-button item-end round default
                    class="lynx-button-primary mode-trip-plan-button"
                    (click)="openDirectionsPage(mode)"
                    *ngIf="ready(); else calculatingDuration">
              {{ durationFor(mode) | prettyTime }}
            </button>
          </ion-item>
          
          <!-- For paratransit, build a special button -->
          <ion-item>
            <h3 item-start class="item-heading mode-label">
              Other Options
            </h3>
            <div item-end class="mode-fare" 
                 *ngIf="ready()">
              {{ tripResponse.costsByTripType("paratransit") | prettyFare }}
            </div>
            <button ion-button item-end round default
                    class="lynx-button-primary mode-trip-plan-button"
                    (click)="openOtherTransportationOptions()"
                    *ngIf="ready(); else calculatingDuration">
                    <ion-icon pull-right name="arrow-forward"></ion-icon>
            </button>
          </ion-item>
          
          <!-- Until the trip response data comes back, display this disabled button for each mode -->
          <ng-template #calculatingDuration> 
            <button ion-button item-end round default
                    class="lynx-button-primary"
                    disabled>
              <ion-spinner name="dots"></ion-spinner>
            </button>           
          </ng-template>
          
        </ion-list>
      </ion-col>
    </ion-row>

    <!-- Show service details only if service is present -->
    <ion-row *ngIf="service">
      <ion-col col-md-8 offset-md-2>
        <h3>About This Service</h3>
        <p id="service-description">
          {{service.description}}          
        </p>
      </ion-col>
    </ion-row>
    
    <!-- Show feedback and questions buttons only if service is present -->
    <ion-row *ngIf="service">
      
      <!-- Questions? button -->
      <!-- Show questions? button only if service phone # is present -->
      <ion-col col-md-6 text-center *ngIf="service.phone">
        <h3>Have Questions?</h3>
        <a href="tel:{{service.phone}}">
          <button ion-button round
                  class="lynx-button-primary">
                  {{service.phone | formatPhoneNumber }}
          </button>
        </a>
      </ion-col>
      
      <!-- Feedback? button -->
      <ion-col col-md-6 text-center>
        <h3>Have Feedback?</h3>
        <button ion-button round 
                class="lynx-button-primary"
                (click)="rateService(service)">
          Rate this Service
        </button>
      </ion-col>
      
    </ion-row>
  </ion-grid>

</ion-content>
